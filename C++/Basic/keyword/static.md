# Static

## 作用
1. 修饰普通变量，修改变量的存储区域和生命周期，使变量存储在**静态区**，在 main 函数运行前就分配了空间，如果有初始值就用初始值初始化它，如果没有初始值系统用默认值初始化它。
2. 修饰普通函数，表明函数的作用范围，仅在定义该函数的文件内才能使用。在多人开发项目时，为了防止与他人命名空间里的函数重名，可以将函数定位为 static。
3. 修饰成员变量，修饰成员变量使所有的对象只保存一个该变量，而且不需要生成对象就可以访问该成员。
4. 修饰成员函数，修饰成员函数使得不需要生成对象就可以访问该函数，但是在 static 函数内不能访问非静态成员。

## 静态成员函数没有this指针
当调用一个对象的非静态成员函数时，系统会把该对象的起始地址赋给成员函数的this指针。而静态成员函数不属于任何一个对象，因此C++规定静态成员函数没有this指针（划重点，面试题常考）。既然它没有指向某一对象，也就无法对一个对象中的非静态成员进行访问。

## 初始化时间？
- 对于C的全局和静态变量，初始化发生在任何代码执行之前，属于编译期初始化。
- 而C++标准规定：全局或静态对象当且仅当对象首次用到时才进行构造。
    1. **作用域**：C++里作用域可分为6种：全局，局部，类，语句，命名空间和文件作用域。
        - 静态全局变量 ：全局作用域+文件作用域，所以无法在其他文件中使用。
        - 静态局部变量 ：局部作用域，只被初始化一次，直到程序结束。
        - 类静态成员变量：类作用域。
    2. 所在空间：都在静态存储区。因为静态变量都在静态存储区，所以下次调用函数的时候还是能取到原来的值。
    3. 生命周期：静态全局变量、静态局部变量都在静态存储区，直到程序结束才会回收内存。类静态成员变量在静态存储区，当超出类作用域时回收内存。

## 静态局部变量，全局变量，局部变量的特点
1. 首先从作用域考虑：C++里作用域可分为6种：全局，局部，类，语句，命名空间和文件作用域。
    - 全局变量：全局作用域，可以通过extern作用于其他非定义的源文件。
    - 静态全局变量 ：全局作用域+文件作用域，所以无法在其他文件中使用。
    - 局部变量：局部作用域，比如函数的参数，函数内的局部变量等等。
    - 静态局部变量 ：局部作用域，只被初始化一次，直到程序结束。
2. 从所在空间考虑：除了局部变量在栈上外，其他都在静态存储区。因为静态变量都在静态存储区，所以下次调用函数的时候还是能取到原来的值。
3. 生命周期： 局部变量在栈上，出了作用域就回收内存；而全局变量、静态全局变量、静态局部变量都在静态存储区，直到程序结束才会回收内存。