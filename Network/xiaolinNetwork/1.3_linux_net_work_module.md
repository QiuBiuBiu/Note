# Linux 系统是如何收发网络包的？

## 网络模型
为了使得多种设备能通过网络相互通信，和为了解决各种不同设备在网络互联中的兼容性问题，国际标准化组织制定了开放式系统互联通信参考模型（Open System Interconnection Reference Model），也就是 OSI 网络模型：
1. 应用层，负责给应用程序提供统一的接口；
2. 表示层，负责把数据转换成兼容另一个系统能识别的格式；
3. 会话层，负责建立、管理和终止表示层实体之间的通信会话；
4. 传输层，负责端到端的数据传输；
5. 网络层，负责数据的路由、转发、分片；
6. 数据链路层，负责数据的封帧和差错检测，以及 MAC 寻址；
7. 物理层，负责在物理网络中传输数据帧；

由于 OSI 模型实在太复杂，提出的也只是概念理论上的分层，并没有提供具体的实现方案。事实上，我们比较常见，也比较实用的是四层模型，即 TCP/IP 网络模型，Linux 系统正是按照这套网络模型来实现网络协议栈的。
1. 应用层，负责向用户提供一组应用程序，比如 HTTP、DNS、FTP 等;
2. 传输层，负责端到端的通信，比如 TCP、UDP 等；
3. 网络层，负责网络包的封装、分片、路由、转发，比如 IP、ICMP 等；
4. 网络接口层，负责网络包在物理网络中的传输，比如网络包的封帧、 MAC 寻址、差错检测，以及通过网卡传输网络帧等；